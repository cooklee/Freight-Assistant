{% load static %}
{% load django_browser_reload %}

<!DOCTYPE html>
<html lang="en" data-theme="corporate">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Freight Assistant{% endblock %}</title>

    <link rel="stylesheet" href="{% static 'css/dist/styles.css' %}">
</head>

<body class="bg-base-200 min-h-screen">

<div class="drawer lg:drawer-open">
    <input id="sidebar-toggle" type="checkbox" class="drawer-toggle"/>

    <div class="drawer-content flex flex-col">
        {% include "partials/navbar.html" %}
        <main class="pt-20">
            <div class="px-6 w-full max-w-4xl mx-auto">
                {% block content %}{% endblock %}
            </div>
        </main>
    </div>

    {% include "partials/sidebar.html" %}
</div>


{% django_browser_reload_script %}

<script>
    (function () {
        const normalize = (s) =>
            (s || "")
                .toString()
                .toLowerCase()
                .normalize("NFD")
                .replace(/[\u0300-\u036f]/g, "")
                .trim();

        function applyFilter(inputEl) {
            const query = normalize(inputEl.value);
            const group = inputEl.getAttribute("data-live-search") || "default";

            const targets = document.querySelectorAll(`[data-live-group="${group}"][data-live-item]`);

            targets.forEach((el) => {
                const haystack = normalize(el.getAttribute("data-search"));
                const match = query === "" || haystack.includes(query);
                el.style.display = match ? "" : "none";
            });
        }

        function setupInput(inputEl) {
            let rafId = null;

            const schedule = () => {
                if (rafId) cancelAnimationFrame(rafId);
                rafId = requestAnimationFrame(() => applyFilter(inputEl));
            };

            inputEl.addEventListener("input", schedule);

            // Initial apply
            applyFilter(inputEl);
        }

        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll("input[data-live-search]").forEach(setupInput);
        });
    })();
</script>

</body>
{% block extra_js %} {% endblock %}
</html>
